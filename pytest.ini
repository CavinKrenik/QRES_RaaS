[pytest]
# Pytest configuration for QRES
# See: https://docs.pytest.org/en/latest/reference/customize.html

# Test discovery
testpaths = tests
python_files = test_*.py verify_*.py
python_classes = Test*
python_functions = test_*

# Markers (use --strict-markers to enforce)
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (may require external resources)
    adversarial: Byzantine attack simulations
    slow: Tests that take >5 seconds
    hardware: Tests requiring specific hardware (ESP32, Pi)
    data: Tests requiring external datasets
    skipif: Conditional skip markers

# Output options
addopts =
    --strict-markers
    -v
    --tb=short
    --color=yes
    --durations=10
    --ignore=tools/
    --ignore=examples/
    --ignore=target/
    --ignore=.venv/

# Coverage options (when using pytest-cov)
# Example: pytest --cov=qres --cov-report=html
# (Details in .coveragerc)

# Warnings
filterwarnings =
    error
    ignore::DeprecationWarning:gym.*:
    ignore::DeprecationWarning:stable_baselines3.*:
    ignore::UserWarning:torch.*:

# Timeout for individual tests (requires pytest-timeout)
# Uncomment if pytest-timeout is installed:
# timeout = 60
# timeout_method = thread

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %H:%M:%S

# Minimum Python version
minversion = 3.8

# Collect from working directory
norecursedirs = .git .tox dist build *.egg target .venv

# Doctest configuration
doctest_optionflags = NORMALIZE_WHITESPACE ELLIPSIS

# Parallel execution (requires pytest-xdist)
# Uncomment to enable:
# addopts = -n auto
